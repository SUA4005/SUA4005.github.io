<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Lesson 3 Countdown</title>

<style>
    html, body {
        width: 100%;
        height: 100%;
        margin: 0;
        font-family: Arial, Helvetica, sans-serif;
        background-color: #0E1746;
    }

    .frame {
        position: absolute;
        top: 30px;
        left: 30px;
        right: 30px;
        bottom: 30px;
        border: 12px solid white;
        display: flex;
        align-items: center;
        justify-content: center;
        box-sizing: border-box;
    }

    .content {
        text-align: center;
        color: white;
        font-weight: bold;
    }

    .label {
        font-size: 4vw;
        margin-bottom: 25px;
    }

    .timer-wrapper {
        display: flex;
        align-items: flex-start;
        justify-content: center;
        gap: 28px;
    }

    .time-block {
        text-align: center;
    }

    .time {
        font-size: 9.5vw;
        font-weight: bold;
        color: #92D050;
        line-height: 1;
    }

    .colon {
        font-size: 9.5vw;
        font-weight: bold;
        color: #92D050;
        line-height: 1;
    }

    .time-label {
        font-size: 2vw;
        font-weight: normal;
        margin-top: 6px;
        color: #92D050;
    }

    .late .time,
    .late .colon,
    .late .time-label {
        color: #EE0000;
    }

    /* Unified pulse */
    .late {
        animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
        0%   { transform: scale(1); }
        50%  { transform: scale(1.05); }
        100% { transform: scale(1); }
    }

    .logo-triangle {
        position: absolute;
        bottom: 0;
        right: 0;
        width: 500px;
        height: 340px;
        background: white;
        clip-path: polygon(100% 0, 100% 100%, 0 100%);
        display: flex;
        align-items: flex-end;
        justify-content: flex-end;
        padding: 30px 30px 20px 30px;
        box-sizing: border-box;
    }

    .logo-triangle img {
        max-width: 190px;
        height: auto;
        margin-bottom: 5px;
    }
</style>
</head>

<body>

<div class="frame">
    <div class="content">
        <div id="label" class="label">Lesson 3 starts in:</div>

        <div id="timerContainer" class="timer-wrapper">
            <div class="time-block">
                <div id="minutes" class="time">00</div>
                <div class="time-label">Minutes</div>
            </div>

            <div class="colon">:</div>

            <div class="time-block">
                <div id="seconds" class="time">00</div>
                <div class="time-label">Seconds</div>
            </div>
        </div>
    </div>

    <div class="logo-triangle">
        <img src="sua-logo.png" alt="Staffordshire University Academy Logo">
    </div>
</div>

<script>
    const labelEl = document.getElementById("label");
    const minutesEl = document.getElementById("minutes");
    const secondsEl = document.getElementById("seconds");
    const timerContainer = document.getElementById("timerContainer");

    function getLessonTargetTime(now) {
        const day = now.getDay(); // 0 = Sunday, 1 = Monday, ..., 6 = Saturday
        const target = new Date(now);

        // Monday–Wednesday
        if (day >= 1 && day <= 3) {
            target.setHours(11, 50, 0, 0);
        }
        // Thursday–Friday
        else if (day === 4 || day === 5) {
            target.setHours(11, 0, 0, 0);
        }
        // Weekend fallback
        else {
            target.setHours(11, 50, 0, 0);
        }

        return target;
    }

    function updateTimer() {
        const now = new Date();
        const target = getLessonTargetTime(now);

        let diff;

        if (now < target) {
            diff = target - now;
            labelEl.textContent = "Lesson 3 starts in:";
            timerContainer.classList.remove("late");
        } else {
            diff = now - target;
            labelEl.textContent = "Lesson 3 has started:";
            timerContainer.classList.add("late");
        }

        const totalSeconds = Math.floor(diff / 1000);
        const minutes = String(Math.floor(totalSeconds / 60)).padStart(2, "0");
        const seconds = String(totalSeconds % 60).padStart(2, "0");

        minutesEl.textContent = minutes;
        secondsEl.textContent = seconds;
    }

    function requestFullscreen() {
        const elem = document.documentElement;
        if (elem.requestFullscreen) {
            elem.requestFullscreen();
        } else if (elem.webkitRequestFullscreen) {
            elem.webkitRequestFullscreen();
        } else if (elem.msRequestFullscreen) {
            elem.msRequestFullscreen();
        }
    }

    window.addEventListener("load", () => {
        requestFullscreen();
        updateTimer();
        setInterval(updateTimer, 1000);
    });
</script>

</body>
</html>